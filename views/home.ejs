<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./CSS/home.css">
  </head>
  <body>
    <h1>URL Shortner App</h1>

   
    <form method="post" action="/url">
        
      <label>Enter Your Original URL </label>
      <input name="url" placeholder="https://example.com" type="text" />
      <button type="submit">Submit</button>
    </form>
    <% if (locals.message) { %>
      <p><%= message %></p>
    <% } %>
    
    <% if (locals.id) { %>
    <p>Generated URL is : <a href="http://localhost:3000/url/<%= id %>" target="_blank"> http://localhost:3000/url/<%= id %></a></p>
    <% } %>

    
    <% if (locals.urls) { %>
        <div >Previous URL List Are </div>
        <table>
            <thead>
                <th>S.No   </th>
                <th>shortId   </th>
                <th>Original Url </th>
                <th>Short URL </th>
                <th>Clicks Count   </th>
            </thead>
            <tbody>
                <% urls.forEach((url,index) => { %>
                    <tr>
                    <td><%= index+1 %></td>
                    <td><%= url.shortId %></td>
                    <td> <a href="<%= url.redirectURL %>" target="_blank"><%= url.redirectURL %></a>  </td>
                    <td><a href="http://localhost:3000/url/<%= url.shortId %>" target="_blank">http://localhost:3000/url/<%= url.shortId %></a></td>
                    <td><%= url.visitHistory.length %></td>
                </tr>
                <% }) %>
            </tbody>
        </table>
     <% } %>

     <!-- Home Button -->
    <% if (locals.id) { %>  
      
        <div id="homeButton">
        <button onclick="window.location.href='/'">Go to Home Page </button>
        </div>
   <% } %>
  </body>
</html>
